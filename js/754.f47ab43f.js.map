{"version":3,"file":"js/754.f47ab43f.js","mappings":"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","sources":["webpack://metawall/./src/stores/status.js","webpack://metawall/./src/utils/sweetalert.js","webpack://metawall/./src/views/SendPostView.vue","webpack://metawall/./src/views/SendPostView.vue?59e5"],"sourcesContent":["import { defineStore } from 'pinia';\n\nexport default defineStore('statusStore', {\n  state: () => ({\n    isLoading: false,\n    hideSidebar: false,\n  }),\n});\n","import Swal from 'sweetalert2';\n\nconst successAlert = (text, timer = 1000, showConfirmButton = false) => Swal.fire({\n  icon: 'success',\n  text,\n  timer,\n  showConfirmButton,\n});\n\nconst errorAlert = (text = '這是無效的操作！') => {\n  Swal.fire({\n    icon: 'error',\n    text,\n  });\n};\n\nexport {\n  successAlert,\n  errorAlert,\n};\n","<script>\nimport { ref, onMounted, onUnmounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport statusStore from '@/stores/status';\nimport request from '@/utils/axios';\nimport { successAlert, errorAlert } from '@/utils/sweetalert';\n\nexport default {\n  setup() {\n    const router = useRouter();\n    const status = statusStore();\n    const post = ref({\n      content: '',\n      imageUrl: '',\n    });\n\n    // 送出貼文\n    const sendPost = async () => {\n      try {\n        await request('/posts', 'post', post.value);\n        successAlert('成功發送貼文！').then(() => router.push('/posts'));\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    // 上傳圖片\n    const isUploaded = ref(false);\n    const isFailed = ref(false);\n    const uploadImage = async (e) => {\n      const formData = new FormData();\n      formData.append('image', e.target.files[0]);\n      try {\n        const res = await request('/upload', 'post', formData);\n        isUploaded.value = true;\n        post.value.imageUrl = res.data.imageUrl;\n        successAlert('上傳成功！');\n      } catch (error) {\n        console.log(error);\n        errorAlert('上傳失敗，請重新上傳圖片！');\n        isFailed.value = true;\n        setTimeout(() => {\n          isFailed.value = false;\n        }, 5000);\n      }\n    };\n\n    onMounted(() => {\n      status.hideSidebar = true;\n    });\n    onUnmounted(() => {\n      status.hideSidebar = false;\n    });\n\n    return {\n      post,\n      sendPost,\n      uploadImage,\n      isFailed,\n      isUploaded,\n    };\n  },\n};\n</script>\n\n<template>\n  <div\n    class=\"overlapping border border-2 border-dark text-center font-monospace bg-white py-5 mb-4\"\n  >\n    <h2 class=\"fs-5\">張貼動態</h2>\n  </div>\n  <div class=\"card shadow-card-2 border border-2 border-dark\">\n    <div class=\"card-body p-8\">\n      <form @submit.prevent=\"sendPost\">\n        <div class=\"mb-4\">\n          <label for=\"content\" class=\"form-label\">貼文內容</label>\n          <textarea\n            v-model=\"post.content\"\n            class=\"form-control rounded-0 border-2 border-dark px-4 py-3\"\n            id=\"content\"\n            rows=\"7\"\n            placeholder=\"輸入您的貼文內容\"\n          ></textarea>\n        </div>\n        <label\n          class=\"btn btn-dark | rounded-2 | py-1 px-8\"\n          :class=\"{ 'mb-4': isUploaded, 'mb-8': !isUploaded }\"\n          for=\"image\"\n          >上傳圖片\n          <input @change=\"uploadImage\" class=\"d-none\" type=\"file\" name=\"image\" id=\"image\" />\n        </label>\n        <div v-if=\"post.imageUrl\" class=\"ratio ratio-16x9 | mb-4\">\n          <img\n            :src=\"post.imageUrl\"\n            alt=\"photo\"\n            class=\"image-control | border rounded-8 border-2 border-dark\"\n          />\n        </div>\n        <div v-if=\"isFailed\" class=\"text-center text-danger | mb-4\">\n          圖片檔案過大，僅限 1mb 以下檔案<br />\n          圖片格式錯誤，僅限 JPG、PNG 圖片\n        </div>\n        <div class=\"text-center\">\n          <button\n            v-if=\"!post.content\"\n            type=\"submit\"\n            class=\"w-60 | btn btn-gray-2 | border border-2 border-dark | lh-sm | py-4\"\n            disabled\n          >\n            送出貼文\n          </button>\n          <button\n            v-else\n            type=\"submit\"\n            class=\"w-60 | btn btn-shadow btn-warning | border border-2 border-dark | lh-sm | py-4\"\n          >\n            送出貼文\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n","import { render } from \"./SendPostView.vue?vue&type=template&id=6e6830c8\"\nimport script from \"./SendPostView.vue?vue&type=script&lang=js\"\nexport * from \"./SendPostView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/sihle/Documents/Github/metawall/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["defineStore","state","isLoading","hideSidebar","successAlert","text","timer","showConfirmButton","Swal","icon","errorAlert","_createElementVNode","class","for","_hoisted_11","type","disabled","_hoisted_1","onSubmit","$setup","_hoisted_5","content","$event","id","rows","placeholder","onChange","name","imageUrl","_createElementBlock","src","alt","_hoisted_13","setup","router","useRouter","status","statusStore","post","ref","sendPost","async","request","value","then","push","error","console","log","isUploaded","isFailed","uploadImage","formData","FormData","append","e","target","files","res","data","setTimeout","onMounted","onUnmounted","__exports__","render"],"sourceRoot":""}