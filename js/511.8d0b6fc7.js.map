{"version":3,"file":"js/511.8d0b6fc7.js","mappings":"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","sources":["webpack://metawall/./src/stores/status.js","webpack://metawall/./src/stores/user.js","webpack://metawall/./src/utils/sweetalert.js","webpack://metawall/./src/views/InfoView.vue","webpack://metawall/./src/views/InfoView.vue?3604"],"sourcesContent":["import { defineStore } from 'pinia';\n\nexport default defineStore('statusStore', {\n  state: () => ({\n    isLoading: false,\n    hideSidebar: false,\n  }),\n});\n","import { defineStore } from 'pinia';\n\nexport default defineStore('userStore', {\n  state: () => ({\n    id: '',\n    name: '',\n    avatar: '',\n  }),\n});\n","import Swal from 'sweetalert2';\n\nconst successAlert = (text, timer = 1000, showConfirmButton = false) => Swal.fire({\n  icon: 'success',\n  text,\n  timer,\n  showConfirmButton,\n});\n\nconst errorAlert = (text = '這是無效的操作！') => {\n  Swal.fire({\n    icon: 'error',\n    text,\n  });\n};\n\nexport {\n  successAlert,\n  errorAlert,\n};\n","<script>\nimport { onMounted, onUnmounted, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport userStore from '@/stores/user';\nimport statusStore from '@/stores/status';\nimport request from '@/utils/axios';\nimport { successAlert, errorAlert } from '@/utils/sweetalert';\n\nexport default {\n  setup() {\n    const router = useRouter();\n    const globalUserState = userStore();\n    const status = statusStore();\n    const user = ref({});\n\n    // 取得個人資料\n    const getProfile = async () => {\n      status.isLoading = true;\n      try {\n        const res = await request('/users/profile', 'get');\n        user.value = res.data.user;\n        status.isLoading = false;\n      } catch (error) {\n        errorAlert();\n      }\n    };\n    onMounted(() => {\n      getProfile();\n      status.hideSidebar = true;\n    });\n    onUnmounted(() => {\n      status.hideSidebar = false;\n    });\n\n    // 上傳大頭貼\n    const isFailed = ref(false);\n    const uploadImage = async (e) => {\n      const formData = new FormData();\n      formData.append('image', e.target.files[0]);\n      try {\n        const res = await request('/upload?type=\"avatar\"', 'post', formData);\n        successAlert('上傳成功！');\n        user.value.avatar = res.data.imageUrl;\n      } catch (error) {\n        errorAlert('上傳失敗，請重新上傳圖片！');\n        isFailed.value = true;\n      }\n    };\n\n    // 更新個人資料\n    const updateProfile = async () => {\n      try {\n        const res = await request('/users/profile', 'patch', user.value);\n        globalUserState.name = res.data.user.name;\n        globalUserState.avatar = res.data.user.avatar;\n        successAlert('個人資料更新成功！').then(() => getProfile());\n      } catch (error) {\n        errorAlert();\n      }\n    };\n\n    // 重設密碼\n    const userPassword = ref({\n      password: '',\n      confirmedPassword: '',\n    });\n    const updatePassword = async () => {\n      try {\n        await request('/users/updatePassword', 'post', userPassword.value);\n        successAlert('密碼重設成功，請重新登入！').then(() => {\n          localStorage.removeItem('jwt');\n          router.push('/login');\n        });\n      } catch (error) {\n        errorAlert('密碼前後不一致！');\n      }\n    };\n\n    return {\n      user,\n      getProfile,\n      uploadImage,\n      isFailed,\n      updateProfile,\n      updatePassword,\n      userPassword,\n    };\n  },\n};\n</script>\n\n<template>\n  <div\n    class=\"overlapping | border border-2 border-dark | text-center\n    font-monospace | bg-white | py-5 mb-8\"\n  >\n    <h2 class=\"fs-5\">修改個人資料</h2>\n  </div>\n\n  <!-- 分頁按鈕 -->\n  <ul class=\"nav nav-tabs ps-3\" id=\"myTab\" role=\"tablist\">\n    <li class=\"nav-item | bg-white\" role=\"presentation\">\n      <button\n        class=\"nav-link link-dark | border border-bottom-0 rounded-top-8\n        border-2 border-dark | px-6 active\"\n        id=\"profile-tab\"\n        data-bs-toggle=\"tab\"\n        data-bs-target=\"#profile\"\n        type=\"button\"\n        role=\"tab\"\n        aria-controls=\"profile\"\n        aria-selected=\"true\"\n      >\n        暱稱修改\n      </button>\n    </li>\n    <li class=\"nav-item | bg-white\" role=\"presentation\">\n      <button\n        class=\"nav-link link-dark | border border-bottom-0 rounded-top-8\n        border-2 border-dark | px-6\"\n        id=\"password-tab\"\n        data-bs-toggle=\"tab\"\n        data-bs-target=\"#password\"\n        type=\"button\"\n        role=\"tab\"\n        aria-controls=\"password\"\n        aria-selected=\"false\"\n      >\n        重設密碼\n      </button>\n    </li>\n  </ul>\n\n  <!-- 分頁內容 -->\n  <div class=\"tab-content | card card-shadow-2 border border-2 border-dark p-8\" id=\"myTabContent\">\n    <!-- 暱稱修改 -->\n    <div\n      class=\"tab-pane fade show active\"\n      id=\"profile\"\n      role=\"tabpanel\"\n      aria-labelledby=\"profile-tab\"\n    >\n      <div class=\"d-flex flex-column align-items-center mb-3\">\n        <div class=\"mw-107 ratio ratio-1x1 | mb-4\">\n          <img\n            v-if=\"user.avatar\"\n            class=\"border rounded-circle border-2 border-dark\"\n            :src=\"user.avatar\"\n            alt=\"預設大頭貼\"\n          />\n          <img\n            v-else\n            class=\"border rounded-circle border-2 border-dark\"\n            src=\"@/assets/images/yellow_chicken.jpeg\"\n            alt=\"avatar\"\n          />\n        </div>\n\n        <label class=\"btn btn-dark | rounded-0 | text-white | py-1 px-6 mb-3\" for=\"image\"\n          >上傳大頭照\n          <input @change=\"uploadImage\" class=\"d-none\" type=\"file\" name=\"image\" id=\"image\" />\n        </label>\n      </div>\n      <div class=\"w-75 w-md-60 | card-body | p-0 mx-auto\">\n        <div class=\"mb-4\">\n          <label for=\"name\" class=\"form-label mb-1\">暱稱</label>\n          <input\n            v-model=\"user.name\"\n            type=\"text\"\n            class=\"form-control | rounded-0 border-2 border-dark | py-3 px-6\"\n            id=\"name\"\n            placeholder=\"請輸入暱稱\"\n          />\n        </div>\n        <div class=\"mb-8\">\n          <h6 class=\"mb-2\">性別</h6>\n          <div class=\"form-check form-check-inline\">\n            <input\n              v-model=\"user.gender\"\n              class=\"form-check-input\"\n              type=\"radio\"\n              name=\"inlineRadioOptions\"\n              id=\"male\"\n              value=\"male\"\n              checked\n            />\n            <label class=\"form-check-label\" for=\"male\">男性</label>\n          </div>\n          <div class=\"form-check form-check-inline\">\n            <input\n              v-model=\"user.gender\"\n              class=\"form-check-input\"\n              type=\"radio\"\n              name=\"inlineRadioOptions\"\n              id=\"female\"\n              value=\"female\"\n            />\n            <label class=\"form-check-label\" for=\"female\">女性</label>\n          </div>\n        </div>\n        <div v-if=\"isFailed\" class=\"text-center text-danger | fs-7 | mt-0 mb-4\">\n          1.圖片寬高比必需為 1:1，請重新輸入<br />\n          2. 解析度寬度至少 300像素以上，請重新輸入\n        </div>\n        <button\n          @click=\"updateProfile\"\n          class=\"d-block w-100 | btn btn-shadow btn-warning\n          btn-hover-primary | border border-2 border-dark | py-4\"\n          type=\"button\"\n        >\n          送出更新\n        </button>\n      </div>\n    </div>\n\n    <!-- 重設密碼 -->\n    <div class=\"tab-pane fade\" id=\"password\" role=\"tabpanel\" aria-labelledby=\"password-tab\">\n      <div class=\"w-75 w-md-60 | card-body | p-0 mx-auto\">\n        <div class=\"mb-4\">\n          <label for=\"newPassword\" class=\"form-label mb-1\">輸入新密碼</label>\n          <input\n            v-model=\"userPassword.password\"\n            type=\"password\"\n            class=\"form-control | rounded-0 border-2 border-dark | py-3 px-6\"\n            id=\"newPassword\"\n            placeholder=\"請輸入新密碼\"\n          />\n        </div>\n        <div class=\"mb-8\">\n          <label for=\"confirmPassword\" class=\"form-label mb-1\">再次輸入</label>\n          <input\n            v-model=\"userPassword.confirmedPassword\"\n            type=\"password\"\n            class=\"form-control | rounded-0 border-2 border-dark | py-3 px-6\"\n            id=\"confirmPassword\"\n            placeholder=\"再次輸入新密碼\"\n          />\n        </div>\n        <input\n          @click=\"updatePassword\"\n          class=\"d-block w-100 | btn btn-gray-2 | border border-2\n          border-gray-3 | text-white lh-sm | py-4\"\n          type=\"button\"\n          value=\"重設密碼\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n","import { render } from \"./InfoView.vue?vue&type=template&id=1e863b67\"\nimport script from \"./InfoView.vue?vue&type=script&lang=js\"\nexport * from \"./InfoView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/sihle/Documents/Github/metawall/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["defineStore","state","isLoading","hideSidebar","id","name","avatar","successAlert","text","timer","showConfirmButton","Swal","icon","errorAlert","_createElementVNode","class","role","type","src","_imports_0","alt","for","_hoisted_22","_hoisted_1","_hoisted_2","$setup","_createElementBlock","onChange","_hoisted_13","$event","placeholder","_hoisted_15","gender","value","checked","_hoisted_17","_hoisted_19","_hoisted_24","onClick","_hoisted_28","password","_hoisted_30","confirmedPassword","setup","router","useRouter","globalUserState","userStore","status","statusStore","user","ref","getProfile","async","res","request","data","error","onMounted","onUnmounted","isFailed","uploadImage","formData","FormData","append","e","target","files","imageUrl","updateProfile","then","userPassword","updatePassword","localStorage","removeItem","push","__exports__","render"],"sourceRoot":""}